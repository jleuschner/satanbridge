<h1>AD-Server</h1>

<!--
<div class="row" ng-init="getComputersByFilter('{operatingsystemversion -notlike \'6.1*\' -and operatingsystemversion -notlike \'5.1*\' }', 'operatingsystem,IPv4Address')">
-->
<div class="row" ng-init="getComputersByFilter('{operatingsystem -like \'*server*\' }', 'operatingsystem,IPv4Address')">
	<div class="col-md-6" >
	<div style="max-height: 800px;overflow: auto">
		<ul class="list-group">
			<li class="list-group-item" ng-repeat="obj in (computerList | orderBy : 'computer.Name')" ng-click="selectComputer(obj.computer)" ng-class="{'list-group-item-info' : 0}">
				<table style="width: 100%;"><tr>
					<td style="width:50%;">
						<strong>{{obj.computer.Name}}</strong>
						<br>
						<small>{{obj.computer.OperatingSystem}}</small>
					</td>
					<td style="width:25%;">
						<div class="text-info" ng-show="obj.onlinePending">
							<i class="fa fa-spinner fa-spin fa-lg"></i> <small>Pinging {{obj.computer.DNSHostName}}...</small>
						</div>
						<div ng-show="!obj.online && !obj.onlinePending">
							<i class="fa fa-bullseye fa-lg text-danger"></i> <small>Offline</small>
						</div>
						<div ng-show="obj.online && !obj.onlinePending">
							<i class="fa fa-bullseye fa-lg text-success"></i> <small>Online</small>
						</div>
					</td>
					<td style="width:25%;">
						<div ng-show="obj.online>0">
						<div class="text-info" ng-show="obj.updatesPending">
							<i class="fa fa-spinner fa-spin fa-lg"></i> <small>Checking Updates...</small>
						</div>
						<div ng-show="obj.updates>0 && !obj.updatesPending">
							<i class="fa fa-windows fa-lg text-danger"></i> <small>{{obj.updates}} Updates!</small>
						</div>
						<div ng-show="obj.updates==0 && !obj.updatesPending">
							<i class="fa fa-windows fa-lg text-success"></i> <small>up to date!</small>
						</div>
						<div ng-show="obj.updates<0 && !obj.updatesPending">
							<i class="fa fa-windows fa-lg text-warning"></i> <small>Updates?</small>
						</div>
						</div>
					</td>
				</tr></table>
			</li>
		</ul>
	</div>
	</div>

	<div class="col-md-6">

		<!-- DNS -->
		<div class="panel panel-info toggle" ng-show="computer.Name && !DnsPending">
			<div class="panel-heading">
				<strong>DNS</strong>
			</div>
			<table class="table">
				<tr ng-repeat="entry in dns">
					<td>{{entry.Name}}</td>
					<td><i class="fa fa-long-arrow-right"></i></td>
					<td>{{entry.Address}}</td>
				</tr>
				<tr ng-repeat="entry in dns_rev">
					<td>{{entry.Name}}</td>
					<td><i class="fa fa-long-arrow-left"></i></td>
					<td>{{entry.NameHost}}</td>
				</tr>
			</table>
		</div>

		<!-- Ping -->
		<div class="panel panel-default toggle" ng-show="computer.Name && !DnsPending">
			<div class="panel-body">
				<div class="pull-left text-info" ng-show="pingPending">
					<i class="fa fa-spinner fa-spin fa-lg"></i> Pinging {{computer.DNSHostName}}...
				</div>
				<div class="pull-left" ng-show="!online && !pingPending">
					<i class="fa fa-bullseye fa-lg text-danger"></i> Offline
				</div>
				<div class="pull-left"  ng-show="online && !pingPending">
					<i class="fa fa-bullseye fa-lg text-success"></i> Online
				</div>
				<button class="btn btn-primary btn-xs pull-right" ng-click="ping(computer.Name)" ng-disabled="!computer.Name">Ping</button>
			</div>
		</div>

		<!-- Updates -->
		<div class="panel panel-info toggle" ng-show="online">
			<div class="panel-heading">
				<strong>Ausstehende Updates</strong>
			</div>
			<table class="table">
				<tr ng-repeat="entry in missingUpdates">
					<td><small>{{entry.Name}}</small></td>
					<td style="white-space:nowrap">{{entry.BulletinID}}</td>
				</tr>
			</table>
		</div>


	</div>
</div>